<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Telebrain | him7n's blog</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%23060606'/><text x='50' y='65' text-anchor='middle' font-family='monospace' font-size='50' font-weight='bold' fill='%238cff9a'>H</text></svg>">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#060606;
    --screen:#05110b;
    --text:#8cff9a;
    --accent:#f6c96b;
    --muted:#7a8b78;
    --red:#ff6b6b;
    --cyan:#83f0c7;
    --shadow: 0 10px 40px rgba(0,0,0,0.7);
    font-family: "Fira Code", "JetBrains Mono", monospace;
  }

  html,body{height:100%;margin:0;background:transparent;color:var(--text);overflow-x:hidden}
  
  .screen {
    box-sizing:border-box;
    position:fixed;
    inset:0;
    padding:24px;
    display:flex;
    align-items:flex-start;
    justify-content:center;
    background: transparent;
  }

  .term {
    width: min(1400px, 96vw);
    height: min(920px, 94vh);
    border-radius: 10px;
    background: linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.45));
    box-shadow: var(--shadow), inset 0 1px 0 rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.03);
    overflow: hidden;
    display:flex;
    flex-direction:column;
    outline: 2px solid rgba(0,255,128,0.02);
  }

  .term::before{
    content:"";
    pointer-events:none;
    position:absolute;
    width:100%;
    height:100%;
    left:0;
    top:0;
    box-shadow: 0 0 120px rgba(0,255,160,0.02), inset 0 0 40px rgba(0,100,60,0.03);
    mix-blend-mode:screen;
  }

  .screen .scanlines{
    pointer-events:none;
    position:absolute;
    inset:0;
    background-image: repeating-linear-gradient(transparent 0px, transparent 1px, rgba(0,0,0,0.03) 2px);
    mix-blend-mode:multiply;
    opacity:0.75;
    animation:flicker 3s ease-in-out infinite;
  }

  @keyframes flicker {
    0% { opacity:0.75 }
    50% { opacity:0.88 }
    100% { opacity:0.75 }
  }

  .term-top {
    display:flex;
    gap:12px;
    align-items:center;
    padding:14px 18px;
    border-bottom:1px solid rgba(255,255,255,0.03);
    background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
  }
  .dot { width:12px;height:12px;border-radius:50% }
  .dot.r{ background: var(--red) }
  .dot.y{ background: var(--accent) }
  .dot.g{ background: #47f07a }

  .title {
    color:var(--muted);
    margin-left:8px;
    font-weight:700;
    letter-spacing:0.06em;
    font-size:0.95rem;
  }

  .term-body {
    position:relative;
    padding:32px 48px;
    font-size:16px;
    line-height:1.75;
    font-weight:500;
    color:var(--text);
    overflow:auto;
    flex:1;
    background:
      radial-gradient(800px 200px at 10% 10%, rgba(0,255,150,0.01), transparent 10%);
  }

  .blog-nav {
    display: flex;
    gap: 20px;
    margin-bottom: 32px;
    padding-bottom: 16px;
    border-bottom: 1px dashed rgba(140,255,154,0.15);
  }

  .blog-nav a {
    color: var(--accent);
    text-decoration: none;
    font-weight: 700;
    transition: color 0.2s;
  }

  .blog-nav a:hover {
    color: var(--text);
  }

  .post-meta { margin-bottom: 24px; }

  .post-date {
    color: var(--muted);
    font-size: 0.9rem;
  }

  .post-title {
    font-size: 1.6rem;
    color: var(--text);
    margin: 12px 0 16px 0;
    text-shadow: 0 0 30px rgba(140,255,154,0.2);
  }

  .post-tags {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .tag {
    background: rgba(140,255,154,0.08);
    color: var(--text);
    padding: 3px 10px;
    border-radius: 3px;
    font-size: 0.75rem;
    font-weight: 700;
  }

  article { max-width: 720px; }

  article h2 {
    color: var(--accent);
    font-size: 1.25rem;
    margin: 40px 0 16px 0;
    padding-left: 16px;
    border-left: 3px solid var(--accent);
  }

  article h3 {
    color: var(--cyan);
    font-size: 1.05rem;
    margin: 28px 0 12px 0;
  }

  article p { margin: 16px 0; color: var(--text); }
  article strong { color: var(--accent); font-weight: 700; }
  article em { color: var(--muted); font-style: italic; }

  article a {
    color: var(--accent);
    text-decoration: none;
    border-bottom: 1px dashed rgba(246,201,107,0.3);
    transition: all 0.2s;
  }

  article a:hover {
    color: var(--text);
    border-bottom-color: var(--text);
  }

  article ul, article ol { margin: 16px 0; padding-left: 24px; }
  article li { margin: 8px 0; color: var(--text); }
  article li::marker { color: var(--accent); }

  .code-block-wrapper { position: relative; margin: 20px 0; }

  .code-block {
    background: rgba(0,0,0,0.4);
    border: 1px solid rgba(140,255,154,0.1);
    border-radius: 6px;
    padding: 16px 20px;
    padding-right: 50px;
    overflow-x: auto;
    font-size: 0.9rem;
    line-height: 1.5;
    margin: 0;
  }

  .copy-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: rgba(140,255,154,0.1);
    border: 1px solid rgba(140,255,154,0.2);
    border-radius: 4px;
    color: var(--muted);
    padding: 4px 8px;
    font-size: 0.75rem;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s;
    opacity: 0;
  }

  .code-block-wrapper:hover .copy-btn { opacity: 1; }
  .copy-btn:hover { background: rgba(140,255,154,0.2); color: var(--text); }
  .copy-btn.copied { background: rgba(140,255,154,0.3); color: var(--text); }

  .code-block .comment { color: var(--muted); }
  .code-block .keyword { color: var(--red); }
  .code-block .string { color: var(--accent); }
  .code-block .command { color: var(--cyan); }

  code {
    background: rgba(140,255,154,0.08);
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 0.9em;
  }

  .callout {
    background: rgba(246,201,107,0.05);
    border-left: 3px solid var(--accent);
    padding: 16px 20px;
    margin: 24px 0;
    border-radius: 0 6px 6px 0;
  }

  .callout-title {
    color: var(--accent);
    font-weight: 700;
    margin-bottom: 8px;
  }

  .callout.info {
    background: rgba(131,240,199,0.05);
    border-left-color: var(--cyan);
  }

  .callout.info .callout-title { color: var(--cyan); }

  .demo-box {
    background: rgba(0,0,0,0.5);
    border: 1px solid rgba(140,255,154,0.15);
    border-radius: 8px;
    padding: 20px;
    margin: 24px 0;
  }

  .demo-title {
    color: var(--muted);
    font-size: 0.85rem;
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  .terminal-demo {
    background: #0a0a0a;
    border: 1px solid rgba(140,255,154,0.2);
    border-radius: 8px;
    overflow: hidden;
    font-size: 0.85rem;
    line-height: 1.4;
  }

  .terminal-demo .term-header {
    background: rgba(255,255,255,0.03);
    padding: 8px 12px;
    display: flex;
    gap: 6px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }

  .terminal-demo .term-header .dot { width: 10px; height: 10px; border-radius: 50%; }
  .terminal-demo .term-header .dot.r { background: #ff6b6b; }
  .terminal-demo .term-header .dot.y { background: #f6c96b; }
  .terminal-demo .term-header .dot.g { background: #47f07a; }

  .terminal-demo .term-content { padding: 16px; }
  .terminal-demo .line { margin: 2px 0; }
  .terminal-demo .cmd { color: var(--cyan); }
  .terminal-demo .info { color: var(--muted); }
  .terminal-demo .separator { color: rgba(140,255,154,0.3); letter-spacing: -1px; }
  .terminal-demo .user-msg { color: var(--accent); }
  .terminal-demo .bot-msg { color: var(--text); }
  .terminal-demo .cost { color: var(--muted); font-size: 0.8rem; }

  .feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 16px;
    margin: 24px 0;
  }

  .feature-card {
    background: rgba(0,0,0,0.3);
    border: 1px solid rgba(140,255,154,0.08);
    border-radius: 6px;
    padding: 16px;
  }

  .feature-card h4 {
    color: var(--accent);
    margin: 0 0 8px 0;
    font-size: 0.95rem;
  }

  .feature-card p {
    color: var(--muted);
    margin: 0;
    font-size: 0.9rem;
    line-height: 1.5;
  }

  .arch-diagram {
    background: rgba(0,0,0,0.4);
    border: 1px solid rgba(140,255,154,0.1);
    border-radius: 6px;
    padding: 20px;
    margin: 24px 0;
    font-size: 0.85rem;
    line-height: 1.3;
    overflow-x: auto;
    white-space: pre;
    color: var(--muted);
  }

  .arch-diagram .highlight { color: var(--text); font-weight: 700; }
  .arch-diagram .accent { color: var(--accent); font-weight: 700; }
  .arch-diagram .cyan { color: var(--cyan); }

  .post-footer {
    margin-top: 48px;
    padding-top: 24px;
    border-top: 1px dashed rgba(140,255,154,0.15);
  }

  .footer-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 16px;
  }

  .back-link {
    color: var(--accent);
    text-decoration: none;
    font-weight: 700;
  }

  .back-link:hover { color: var(--text); }

  .like-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(255,107,107,0.1);
    border: 1px solid rgba(255,107,107,0.2);
    border-radius: 6px;
    padding: 8px 16px;
    color: var(--muted);
    font-family: inherit;
    font-size: 0.9rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
  }

  .like-btn:hover { background: rgba(255,107,107,0.2); color: var(--red); border-color: var(--red); }
  .like-btn.liked { background: rgba(255,107,107,0.25); color: var(--red); border-color: var(--red); }
  .like-btn .heart { font-size: 1.1rem; transition: transform 0.2s; }
  .like-btn:hover .heart, .like-btn.liked .heart { transform: scale(1.2); }
  .like-btn .count { min-width: 20px; }

  .prompt-line { display: flex; gap: 8px; align-items: center; margin-top: 24px; }
  .prompt { color:var(--accent); font-weight:900; }
  .cwd { color: var(--cyan); font-weight:800 }
  .dollar { color:var(--text) }
  .blink { animation: blink 1s step-end infinite; }

  @keyframes blink { 50% { opacity: 0; } }

  @media (max-width:820px){
    .term{ border-radius:0; width:100vw; height:100vh; min-height:100vh}
    .term-body{ padding:18px; font-size:15px }
    .post-title{ font-size:1.3rem }
    .feature-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>
  <div class="screen" role="main">
    <div class="term">
      <div class="term-top">
        <div class="dot r"></div>
        <div class="dot y"></div>
        <div class="dot g"></div>
        <div class="title">him7n@omarchy ~/blog/telebrain</div>
      </div>

      <div class="term-body">
        <nav class="blog-nav">
          <a href="../index.html">&larr; cd ~</a>
          <a href="../blog.html">&larr; cd ../blog</a>
        </nav>

        <article>
          <header class="post-meta">
            <div class="post-date">2026-02-21 &bull; 8 min read</div>
            <h1 class="post-title">Telebrain: Talk to Your Codebase from Your Phone</h1>
            <div class="post-tags">
              <span class="tag">nodejs</span>
              <span class="tag">telegram</span>
              <span class="tag">ai</span>
              <span class="tag">claude</span>
              <span class="tag">cli</span>
              <span class="tag">devtools</span>
            </div>
          </header>

          <h2>The Problem</h2>

          <p>You're on the bus. Or grabbing coffee. Or lying on the couch. And you suddenly think &mdash; <em>"wait, how does that auth middleware actually work?"</em></p>

          <p>Your laptop is at your desk. Your codebase is on your Mac. All you have is your phone.</p>

          <p>You could open GitHub on mobile and squint at files. Or you could text your codebase like a friend and get an instant answer. I built the second thing.</p>

          <h2>What Telebrain Does</h2>

          <p>Telebrain is a ~100 line Node.js script that bridges <strong>Telegram</strong> on your phone to <strong>Claude Code</strong> on your Mac. You send a message on Telegram, Claude reads your actual project files, and sends back an answer.</p>

          <div class="arch-diagram"><span class="highlight">Phone (Telegram)</span> &rarr;&rarr;&rarr; <span class="accent">Telegram API</span> &rarr;&rarr;&rarr; <span class="highlight">Your Mac</span>
                                                         <span class="cyan">Node.js bot</span>
                                                              &darr;
                                                      <span class="accent">Claude Code CLI</span>
                                                              &darr;
                                                    <span class="highlight">Your Project Files</span></div>

          <p>No servers to deploy. No tunnels. No SSH. No ports to open. The bot just polls Telegram over HTTPS &mdash; outbound only from your Mac.</p>

          <div class="demo-box">
            <div class="demo-title">What it looks like</div>
            <div class="terminal-demo">
              <div class="term-header">
                <div class="dot r"></div>
                <div class="dot y"></div>
                <div class="dot g"></div>
              </div>
              <div class="term-content">
                <div class="line"><span class="user-msg">you:</span> what does the checkout function do?</div>
                <div class="line">&nbsp;</div>
                <div class="line"><span class="bot-msg">telebrain:</span> The checkout function in payment.ts</div>
                <div class="line"><span class="bot-msg">handles the payment flow:</span></div>
                <div class="line"><span class="bot-msg">1. Validates cart items against inventory</span></div>
                <div class="line"><span class="bot-msg">2. Calculates tax based on user region</span></div>
                <div class="line"><span class="bot-msg">3. Creates a Stripe PaymentIntent</span></div>
                <div class="line"><span class="bot-msg">4. Records the transaction in the DB</span></div>
                <div class="line">&nbsp;</div>
                <div class="line"><span class="separator">---</span></div>
                <div class="line"><span class="cost">$0.0512 | 16718+46 tokens | 6.2s | claude-sonnet-4-5</span></div>
              </div>
            </div>
          </div>

          <h2>How It Works</h2>

          <p>The entire architecture fits in your head:</p>

          <ol>
            <li>You send a message on <strong>Telegram</strong></li>
            <li>The bot (running on your Mac) picks it up via long-polling</li>
            <li>It calls <code>claude -p "your question" --output-format json</code></li>
            <li>Claude Code reads your project files, thinks, responds</li>
            <li>The bot sends the response back to Telegram</li>
          </ol>

          <p>Each call is <strong>stateless</strong>. Claude reads your codebase fresh every time &mdash; so it always sees the latest code, but doesn't remember previous messages. It's like paging a doctor who reads your entire chart before answering each question.</p>

          <h2>Features</h2>

          <div class="feature-grid">
            <div class="feature-card">
              <h4>/project</h4>
              <p>Tap to switch between projects. No typing paths &mdash; just buttons.</p>
            </div>
            <div class="feature-card">
              <h4>/model</h4>
              <p>Switch between sonnet, opus, haiku. Tap the one you want.</p>
            </div>
            <div class="feature-card">
              <h4>Cost tracking</h4>
              <p>Every response shows cost, token count, duration, and model used.</p>
            </div>
            <div class="feature-card">
              <h4>Security</h4>
              <p>Only your Telegram chat ID can talk to the bot. Everyone else is ignored.</p>
            </div>
          </div>

          <h2>The Deep Rabbit Hole</h2>

          <p>Telebrain is the simple answer to a complicated question I spent an entire day exploring: <em>"Can I talk to Cursor from my phone?"</em></p>

          <p>Here's what I tried before landing here:</p>

          <ul>
            <li><strong>tmate + Cursor CLI</strong> &mdash; SSH from Termux. Works, but typing in a phone terminal is pain. Also the CLI is slow (beta) and needed <code>sudo</code>.</li>
            <li><strong>cursor_remote</strong> &mdash; Open source tool using AppleScript + Supabase to type into Cursor's chat. Clever hack, but fragile and one-directional.</li>
            <li><strong>cursor-autopilot</strong> &mdash; VS Code extension that sends chat summaries to Telegram. Close, but doesn't let you browse or pick conversations.</li>
            <li><strong>cursor:// deep links</strong> &mdash; Officially supported URL scheme. Opens a new chat with prefilled text, but needs a confirmation click on the Mac and creates a new session every time.</li>
            <li><strong>Direct Claude API</strong> &mdash; Building a full bridge with API keys, context engines, file indexing. Way overengineered for "I just want to ask questions about my code."</li>
          </ul>

          <p>The realization: I don't need to inject messages into Cursor's chat. I don't need sessions or conversations. I just need to <strong>ask questions about my code from my phone</strong>. Claude Code + Telegram does exactly that with zero infrastructure.</p>

          <h2>The Gotcha: stdin</h2>

          <p>The one bug that took the longest to find: <code>claude -p</code> hangs silently when spawned as a child process. No output, no error. Just... nothing.</p>

          <p>Turns out Claude Code waits for a TTY/stdin prompt (like a workspace trust dialog). The fix:</p>

          <div class="code-block">
<span class="comment">// This hangs forever:</span>
spawn(<span class="string">'claude'</span>, [<span class="string">'-p'</span>, <span class="string">'hello'</span>]);

<span class="comment">// This works:</span>
spawn(<span class="string">'claude'</span>, [<span class="string">'-p'</span>, <span class="string">'hello'</span>], {
  stdio: [<span class="string">'ignore'</span>, <span class="string">'pipe'</span>, <span class="string">'pipe'</span>]  <span class="comment">// stdin = /dev/null</span>
});
</div>

          <p>Setting <code>stdio[0]</code> to <code>'ignore'</code> pipes stdin from <code>/dev/null</code>, bypassing any interactive prompts. Add <code>--dangerously-skip-permissions</code> and it runs clean.</p>

          <h2>Setup</h2>

          <div class="callout">
            <div class="callout-title">ðŸ“¦ Prerequisites</div>
            <p>
              <strong>Claude Code</strong> &mdash; Installed and authenticated (via Anthropic or Vertex AI).<br>
              <strong>Node.js 18+</strong> &mdash; To run the bot.<br>
              <strong>A Telegram account</strong> &mdash; Create a bot via @BotFather.
            </p>
          </div>

          <div class="code-block">
<span class="comment"># Clone and configure</span>
<span class="command">cd telebrain</span>
<span class="command">cp .env.example .env</span>
<span class="comment"># Edit .env with your bot token and chat ID</span>
<span class="command">npm install</span>
<span class="command">node bot.js</span>
</div>

          <p>That's it. Open Telegram, find your bot, ask it anything about your code.</p>

          <h2>Cost</h2>

          <p>Each question costs roughly <strong>$0.03 &ndash; $0.15</strong> depending on project size and response length. The cost is billed through your Claude Code setup (Anthropic subscription or Vertex AI). Heavy daily use (50 questions) runs about $2&ndash;5/day.</p>

          <p>Not free, but cheaper than context-switching back to your laptop every time a question pops into your head.</p>

          <h2>What's Next</h2>

          <p>Telebrain is intentionally minimal. Things I might add:</p>

          <ul>
            <li><strong>Running total</strong> &mdash; <code>/cost</code> command showing daily spend</li>
            <li><strong>Voice messages</strong> &mdash; Telegram supports voice; transcribe and send to Claude</li>
            <li><strong>File diffs</strong> &mdash; Show recent git changes before asking questions</li>
            <li><strong>pm2 auto-start</strong> &mdash; Keep the bot alive across reboots</li>
          </ul>

          <p>But honestly, the 100-line version does 90% of what I need. Ship small, add later.</p>

          <div class="callout">
            <div class="callout-title">ðŸ”— Links</div>
            <p>
              <a href="https://github.com/him7n" target="_blank">GitHub: him7n</a> &mdash; Check out the telebrain repo and other tools.
            </p>
          </div>

          <footer class="post-footer">
            <div class="footer-actions">
              <a href="../blog.html" class="back-link">&larr; cd ..</a>
              <button class="like-btn" id="like-btn" onclick="toggleLike()">
                <span class="heart">â™¥</span>
                <span class="count" id="like-count">0</span>
              </button>
            </div>
            
            <div class="prompt-line">
              <span class="prompt">him7n@omarchy</span>
              <span class="cwd">~/blog</span>
              <span class="dollar">$</span>
              <span class="blink">â–ˆ</span>
            </div>
          </footer>
        </article>
      </div>
    </div>

    <div class="scanlines"></div>
  </div>

<script>
document.querySelectorAll('.code-block').forEach(block => {
  if (!block.parentElement.classList.contains('code-block-wrapper')) {
    const wrapper = document.createElement('div');
    wrapper.className = 'code-block-wrapper';
    block.parentNode.insertBefore(wrapper, block);
    wrapper.appendChild(block);
  }
  
  const btn = document.createElement('button');
  btn.className = 'copy-btn';
  btn.textContent = 'copy';
  btn.onclick = () => {
    const text = block.textContent;
    navigator.clipboard.writeText(text).then(() => {
      btn.textContent = 'copied!';
      btn.classList.add('copied');
      setTimeout(() => {
        btn.textContent = 'copy';
        btn.classList.remove('copied');
      }, 2000);
    });
  };
  block.parentElement.appendChild(btn);
});

function toggleLike() {
  const btn = document.getElementById('like-btn');
  const countEl = document.getElementById('like-count');
  const postId = 'telebrain';
  const storageKey = `liked_${postId}`;
  const countKey = `likes_${postId}`;
  
  const isLiked = localStorage.getItem(storageKey) === 'true';
  let count = parseInt(localStorage.getItem(countKey) || '0');
  
  if (isLiked) {
    count = Math.max(0, count - 1);
    localStorage.setItem(storageKey, 'false');
    btn.classList.remove('liked');
  } else {
    count++;
    localStorage.setItem(storageKey, 'true');
    btn.classList.add('liked');
  }
  
  localStorage.setItem(countKey, count.toString());
  countEl.textContent = count;
}

(function() {
  const postId = 'telebrain';
  const isLiked = localStorage.getItem(`liked_${postId}`) === 'true';
  const count = localStorage.getItem(`likes_${postId}`) || '0';
  
  document.getElementById('like-count').textContent = count;
  if (isLiked) {
    document.getElementById('like-btn').classList.add('liked');
  }
})();
</script>
</body>
</html>
